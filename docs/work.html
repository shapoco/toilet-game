<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0">

    <meta name="keywords" content="4æŠãƒˆã‚¤ãƒ¬ã‚²ãƒ¼ãƒ ">
    <meta name="description" content="ä¸€ç•ªç¥¨ãŒå¤šã„ãƒˆã‚¤ãƒ¬ã‚’é¸ã‚“ã äººãŒã†ã‚“ã“æ¼ã‚‰ã™ã‚²ãƒ¼ãƒ ">

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@shapoco" />
    <meta property="og:url" content="https://shapoco.github.io/toilet-game/" />
    <meta property="og:title" content="4æŠãƒˆã‚¤ãƒ¬ã‚²ãƒ¼ãƒ " />
    <meta property="og:description" content="ä¸€ç•ªç¥¨ãŒå¤šã„ãƒˆã‚¤ãƒ¬ã‚’é¸ã‚“ã äººãŒã†ã‚“ã“æ¼ã‚‰ã™ã‚²ãƒ¼ãƒ " />
    <meta property="og:image" content="https://shapoco.github.io/toilet-game/cover.png?20250517135800" />
    
    <link rel="icon" href="https://shapoco.github.io/favicon192.png" sizes="192x192">
    <link rel="apple-touch-icon" href="https://shapoco.github.io/apple-touch-icon180.png" sizes="180x180">
    <link rel="shortcut icon" href="https://shapoco.github.io/favicon48.ico">

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-171109827-1"></script>
    <script>
      var remoteHost = window.location.hostname;
      if (remoteHost == "localhost") {
        console.log(`Google Analytics disabled on: '${remoteHost}'`);
      }
      else {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-171109827-1');
      }
    </script>

    <link rel="stylesheet" href="./style.css?20250517135800">
    <script src="./toilet_game.js?20250517135800"></script>

    <title>4æŠãƒˆã‚¤ãƒ¬ã‚²ãƒ¼ãƒ </title>
  </head>

  <body>
    <h1>ä½œæ¥­ç”¨ãƒšãƒ¼ã‚¸</h1>

    <h2>å‡ºé¡Œ</h2>
<pre id="question">

</pre>
<script>
  const n = DB.filter(x => (!!x.total && !!x.percent)).length + 1;
  document.querySelector('#question').textContent =
    `ä¸€ç•ªç¥¨ãŒå¤šã„ãƒˆã‚¤ãƒ¬ã‚’é¸ã‚“ã äººãŒã†ã‚“ã“æ¼ã‚‰ã™ã‚²ãƒ¼ãƒ  ç¬¬${n}å›\n` +
    `(éå»æˆç¸¾ã¯ã‚¹ãƒ¬ãƒƒãƒ‰å‚ç…§) #4æŠãƒˆã‚¤ãƒ¬ã‚²ãƒ¼ãƒ `;
</script>
<pre>
A ğŸš½ğŸšª ğŸ˜¨ğŸ’¨ğŸ’¨ğŸ’¨
</pre>
<pre>
B ğŸš½ğŸšª ğŸ˜¨ğŸ’¨ğŸ’¨ğŸ’¨
</pre>
<pre>
C ğŸš½ğŸšª ğŸ˜¨ğŸ’¨ğŸ’¨ğŸ’¨
</pre>
<pre>
D ğŸš½ğŸšª ğŸ˜¨ğŸ’¨ğŸ’¨ğŸ’¨
</pre>
<pre>
éå»æˆç¸¾: https://shapoco.github.io/toilet-game/
</pre>

    <a href="https://cards-dev.x.com/validator" target="_blank">Card Validator | Twitter Developers</a>
    <h2>é›†è¨ˆ</h2>
    
    <textarea id="pastedText" style="width: 100%; height: 150px;">A ğŸš½ğŸšª ğŸ˜¨ğŸ’¨ğŸ’¨ğŸ’¨
11.1%
B ğŸš½ğŸšª ğŸ˜¨ğŸ’¨ğŸ’¨ğŸ’¨
22.2%
C ğŸš½ğŸšª ğŸ˜¨ğŸ’¨ğŸ’¨ğŸ’¨
33.3%
D ğŸš½ğŸšª ğŸ˜¨ğŸ’¨ğŸ’¨ğŸ’¨
44.4%
99999ç¥¨
Â·
æ®‹ã‚Š3æ™‚é–“
åˆå¾Œ0:00 Â· 2999å¹´9æœˆ9æ—¥
Â·
1,234
  ä»¶ã®è¡¨ç¤º</textarea>

    <pre id="jsonCode"></pre>

    <p>
      é¸æŠç¯„å›²:
    </p>
    <p>
      <img src="./images/selection-area.png">
    </p>

    <script>
      function main() {
        document.querySelector('#pastedText').addEventListener('input', onPastedTextChanged);
        onPastedTextChanged();
      }

      function onPastedTextChanged() {
        const textBox = document.querySelector('#pastedText');
        try {
          const lines = textBox.value.split('\n');
          for (let i = 0; i < lines.length; i++) {
            lines[i] = lines[i].trim();
          }

          let percent = [];
          let total = 0;
          let dateStr = '';

          for (let i = 0; i < NUM_SELECTIONS; i++) {
            const m = lines[i * 2 + 1].match(/^(\d+(\.\d+)?)%$/);
            percent.push(parseFloat(m[1]));
          }

          {
            const m = lines[8].match(/^(\d+)ç¥¨$/);
            total = parseInt(m[1]);
          }

          {
            const m = lines[11].match(/(\d{4})å¹´(\d{1,2})æœˆ(\d{1,2})æ—¥$/);
            const date = new Date(m[1], m[2] - 1, m[3]);
            //date.setDate(date.getDate() + 1);
            date.setTime(date.getTime() + 9 * 60 * 60 * 1000);
            // date ã‚’ YYYY-MM-DD å½¢å¼ã«å¤‰æ›
            dateStr = date.toISOString().slice(0, 10);
          }

          const out = `{ date: '${dateStr}', total: ${total}  , percent: [${percent.join(', ')}], url: '(URLè²¼ã‚Šä»˜ã‘)' },`;
          document.querySelector('#jsonCode').textContent = out;
          textBox.style.backgroundColor = 'unset';
        }
        catch (e) {
          document.querySelector('#jsonCode').textContent = e;
          textBox.style.backgroundColor = 'red';
          throw e;
        }
      }

      window.onload = main;

    </script>

  </body>

</html>
